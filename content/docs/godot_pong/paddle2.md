---
title: 5. Друга ракетка
weight: 5
---

# Друга ракетка

В попередньому розділі ми створили першу ракетку для нашої гри. Друга являє собою все те ж саме, крім того, що повинна управлятись іншими клавішами.
Немає сенсу створювати об'єкт з нуля. У нас вже є описано основу класу paddle, який буде виконувати роль обох. Але все ж, нам треба спосіб як їх розрізняти в коді. Є багато шляхів це добитись, але ми просто скористаємось назвою об'єкта. 
Отже, для створення другої ракетки, просто здублюємо першу, виділивши її на панелі сцени, та натиснувши `Ctrl+D`. Ось наша копію і створена, включаючи всі компоненти, які вона включає в себе. 

Нам потрібно перемістити її на праву сторону екрану. Для цього вмикаємо інструмент переміщення, та з виділеним об'єктом, перетягуємо його вправо. Щоб при цьому не було зміщення вниз або вверх, можна затиснути клавішу `Ctrl` під час руху. Це ввімкне примагнічування та полегшить ваше завдання. 

{{< video autoplay="true" muted="true" loop="true" src="PaddleMove" >}}

Далі нам варто перейменувати цей об'єкт. Назвемо його Right.

Якщо ви зараз запустите гру, обидві дощечки будуть рухатись синхронно по натисканню одних і тих же клавіш. Ми стикнулись з проблемою, як же з одного коду управляти двома об'єктами, та ще й різними клавішами. Для цього ще раз поглянемо на панель налаштування вводу, де ми налаштовували події натискання клавіш. Для цього натискаємо `Project` -> `Project Settings` і переходимо на вкладку `Input Map`. Погляньте, як ми назвали події. Кожна з цих назв починається з `left` або `right`. Ми це використаємо на нашу користь. 

![Image](/images/ActionLeftRight.jpg)  

Закриємо це віконце, і повернемось до коду. Ми можемо взяти ім'я об'єкту на пряму з параметру `name`. Але в годоті прийнято називати об'єкти в сцені з великої літери, а події з малої. Це легко вирішити, використавши метод `to_lower()`, який перетворить всі літери в нижній регістр. Отже, в тілі функції `_ready()` створюємо змінну `var n = name.to_lower()`. В результаті вона буде містити слово `left` або `right`, відповідно до назви вузла, до якого прикріплено цей код. 

Вгорі, поза функціями, створимо дві змінні `_up` і `_down`, не передаючи їм поки жодного значення. 

{{< highlight GDScript >}} 
var _up
var _down 
{{< / highlight >}}

Про різницю між різними сферами застосування змінних я поясню пізніше. Знову, в тілі `_ready` після створення змінної `n` назначаємо значення для `_up` і `_down`.

{{< highlight GDScript >}} 
_up = n + "_up"
_down = n + "_down"
{{< / highlight >}}
Таким чином ці змінні будуть містити назви подій натискання клавіш відповідно назві кожної з дощечок. 

Поглянемо нижче, в тілі функції process в першому рядку ми отримували силу натиску клавіш вгору та вниз. Зараз замість на пряму вказувати назву події, використаємо наші змінні `_up` і `_down`.

{{< highlight GDScript >}} 
var input = Input.get_action_strength(_down) - Input.get_action_strength(_up)
{{< / highlight >}}
Ось як на даний момент повинен виглядати код:

{{< highlight GDScript >}} 
extends Area2D

var _up
var _down 

func _ready():
	var n = name.to_lower()
	_up = n + "_up"
	_down = n + "_down"

func _process(delta):
	var input = Input.get_action_strength(_down) - Input.get_action_strength(_up)
	position.y = position.y + input * 200 * delta
	position.y = clamp(position.y, 50, get_viewport_rect().size.y - 50)
{{< / highlight >}}

Спробуємо запустити гру. Якщо ви все зробили правильно, кожна з дощечок повинна управлятись незалежно.

{{< video autoplay="true" muted="true" loop="true" src="PongStart01" >}}

Тепер нам треба м'ячик, який відбиватимуть гравці. Як його створити, розглянуто в наступному розділі.
